!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Tracker=t():e.Tracker=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var o,i;i="undefined"!=typeof window?window:this,void 0===(o=function(){return function(e){"use strict";var t,n,o,i="19.02.1",r="javascript_native_web",a=!1,s=!1,c="/i",d=500,l=1e3,u=[],f=[],m={},g=[],p={},_=[],v=null,h=!0,y=0,w=null,k=0,b=0,x=0,L=60,S=20,O=0,C=60,E=10,T=100,N=!0,M=30,A=0,B=!0,P=!1,I={},H={},q=/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,j=/(TrackerSiteBot|nuhk|Googlebot|GoogleSecurityScanner|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver|bingbot|Google Web Preview|Mediapartners-Google|AdsBot-Google|Baiduspider|Ezooms|YahooSeeker|AltaVista|AVSearch|Mercator|Scooter|InfoSeek|Ultraseek|Lycos|Wget|YandexBot|Yandex|YaDirectFetcher|SiteBot|Exabot|AhrefsBot|MJ12bot|TurnitinBot|magpie-crawler|Nutch Crawler|CMS Crawler|rogerbot|Domnutch|ssearch_bot|XoviBot|netseer|digincore|fr-crawler|wesee|AliasIO|contxbot|PingdomBot|BingPreview|HeadlessChrome)/,J=!0,D=[];(e=e||{}).features=["sessions","events","views","scrolls","clicks","forms","crashes","attribution","users","star-rating","location"];for(var R,z={},U=0;U<e.features.length;U++)z[e.features[U]]={};e.init=function(t){if(!a){if(o=se(),a=!0,u=Oe("cly_queue")||[],D=Oe("cly_view_history")||[],p={},f=Oe("cly_event")||[],m=Oe("cly_remote_configs")||{},d=de("interval",t=t||{},d),l=de("queue_size",t,l),L=de("fail_timeout",t,L),S=de("inactivity_time",t,S),C=de("session_update",t,C),E=de("max_events",t,E),T=de("max_logs",t,T),N=de("use_session_cookie",t,N),M=de("session_cookie_timeout",t,M),e.ignore_prefetch=de("ignore_prefetch",t,!0),e.debug=de("debug",t,!1),e.app_key=de("app_key",t,null),e.test_mode=de("test_mode",t,!1),e.device_id=de("device_id",t,oe()),e.url=me(de("url",t,"")),e.app_version=de("app_version",t,"0.0"),e.country_code=de("country_code",t,null),e.city=de("city",t,null),e.ip_address=de("ip_address",t,null),e.ignore_bots=de("ignore_bots",t,!0),e.force_post=de("force_post",t,!1),e.remote_config=de("remote_config",t,!1),e.q=e.q||[],e.onload=e.onload||[],e.ignore_visitor=de("ignore_visitor",t,!1),e.require_consent=de("require_consent",t,!1),t.ignore_referrers&&Array.isArray(t.ignore_referrers)?_=t.ignore_referrers:e.ignore_referrers&&Array.isArray(e.ignore_referrers)&&(_=e.ignore_referrers),""===e.url&&(ae("Please provide server URL"),e.ignore_visitor=!0),Oe("cly_ignore")&&(e.ignore_visitor=!0),G(),window.name&&0===window.name.indexOf("cly:"))try{e.passed_data=JSON.parse(window.name.replace("cly:",""))}catch(e){ae("Could not parse name",window.name)}else if(location.hash&&0===location.hash.indexOf("#cly:"))try{e.passed_data=JSON.parse(location.hash.replace("#cly:",""))}catch(e){ae("Could not parse hash",location.hash)}if(e.passed_data&&e.passed_data.token&&e.passed_data.purpose&&(e.passed_data.token!==Oe("cly_old_token")&&(Le(e.passed_data.token),Oe("cly_old_token",e.passed_data.token)),"heatmap"===e.passed_data.purpose&&(e.ignore_visitor=!0,Ne(),Ee(e.url+"/views/heatmap.js",Me))),!e.ignore_visitor){ae("Tracker initialized"),e.onload.constructor!==Array&&(e.onload=[]),e.q.constructor!==Array&&(e.q=[]),ne(),Oe("cly_id",e.device_id);var n=0;if(e.utm=e.utm||{source:!0,medium:!0,campaign:!0,term:!0,content:!0},location.search){var i=location.search.substring(1).split("&"),r={},s=!1;for(n=0;n<i.length;n++){var c=i[n].split("=");"cly_id"===c[0]?Oe("cly_cmp_id",c[1]):"cly_uid"===c[0]?Oe("cly_cmp_uid",c[1]):0===(c[0]+"").indexOf("utm_")&&e.utm[c[0].replace("utm_","")]&&(r[c[0].replace("utm_","")]=c[1],s=!0)}if(s){for(var g in e.utm)r[g]?e.userData.set("utm_"+g,r[g]):e.userData.unset("utm_"+g);e.userData.save()}}W(),e.remote_config&&e.fetch_remote_config(e.remote_config)}}},e.group_features=function(e){if(e)for(var t in e)z[t]?ae("Feature name "+t+" is already reserved"):"string"==typeof e[t]?z[t]={features:[e[t]]}:e[t]&&Array.isArray(e[t])&&e[t].length?z[t]={features:e[t]}:ae("Incorrect feature list for "+t+" value: "+e[t]);else ae("Incorrect features: "+e)},e.check_consent=function(t){return!(e.require_consent&&(z[t]?!z[t]||!z[t].optin:(ae("No feature available for "+t),1)))},e.check_any_consent=function(){if(!e.require_consent)return!0;for(var t in z)if(z[t]&&z[t].optin)return!0;return!1},e.add_consent=function(t){if(ae("Adding consent for "+t),Array.isArray(t))for(var n=0;n<t.length;n++)e.add_consent(t[n]);else z[t]?z[t].features?(z[t].optin=!0,e.add_consent(z[t].features)):!0!==z[t].optin&&(I[t]=!0,z[t].optin=!0,V(),setTimeout(function(){"sessions"===t&&H.begin_session?(e.begin_session.apply(e,H.begin_session),H.begin_session=null):"views"===t&&H.track_pageview&&(w=null,e.track_pageview.apply(e,H.track_pageview),H.track_pageview=null),H.change_id&&(e.change_id.apply(e,H.change_id),H.change_id=null)},1)):ae("No feature available for "+t)},e.remove_consent=function(t){if(ae("Removing consent for "+t),Array.isArray(t))for(var n=0;n<t.length;n++)e.remove_consent(t[n]);else z[t]?(z[t].features?e.remove_consent(z[t].features):!1!==z[t].optin&&(I[t]=!1,V()),z[t].optin=!1):ae("No feature available for "+t)};var V=function(){R&&(clearTimeout(R),R=null),R=setTimeout(function(){Se(I)&&(te({consent:JSON.stringify(I)}),I={})},1e3)};function Y(t){if(!e.ignore_visitor)if(t.key){t.count||(t.count=1);var n=ge(t,["key","count","sum","dur","segmentation"]);n.timestamp=ce();var o=new Date;n.hour=o.getHours(),n.dow=o.getDay(),f.push(n),Oe("cly_event",f),ae("Adding event: ",t)}else ae("Event must have key property")}e.begin_session=function(n,o){if(e.check_consent("sessions")){if(!s){t=se(),s=!0,h=!n;var i=Oe("cly_session");if(o||!N||!i||parseInt(i)<=se()){ae("Session started");var r={begin_session:1};r.metrics=JSON.stringify(re()),te(r)}Z()}}else H.begin_session=arguments},e.session_duration=function(t){e.check_consent("sessions")&&s&&(ae("Session extended",t),te({session_duration:t}),Z())},e.end_session=function(n,o){e.check_consent("sessions")&&s&&(n=n||se()-t,K(),!N||o?(ae("Ending session"),te({end_session:1,session_duration:n})):e.session_duration(n),s=!1)},e.change_id=function(t,n){if(e.device_id!==t){n||(f.length>0&&(te({events:JSON.stringify(f)}),Oe("cly_event",f=[])),e.end_session(null,!0),p={});var o=e.device_id;e.device_id=t,Oe("cly_id",e.device_id),ae("Changing id"),n?e.check_any_consent()?te({old_device_id:o}):H.change_id=arguments:e.begin_session(!h,!0),e.remote_config&&(Oe("cly_remote_configs",m={}),e.fetch_remote_config(e.remote_config))}},e.add_event=function(t){e.check_consent("events")&&Y(t)},e.start_event=function(e){p[e]?ae("Timed event with key "+e+" already started"):p[e]=se()},e.end_event=function(t){"string"==typeof t&&(t={key:t}),t.key?p[t.key]?(t.dur=se()-p[t.key],e.add_event(t),delete p[t.key]):ae("Timed event with key "+t.key+" was not started"):ae("Event must have key property")},e.user_details=function(t){e.check_consent("users")&&(ae("Adding userdetails: ",t),te({user_details:JSON.stringify(ge(t,["name","username","email","organization","phone","picture","gender","byear","custom"]))}))},e.report_conversion=function(t,n){e.check_consent("attribution")&&(t=t||Oe("cly_cmp_id")||"cly_organic",n=n||Oe("cly_cmp_uid"),t&&n?te({campaign_id:t,campaign_user:n}):t&&te({campaign_id:t}))};var X={},F=function(t,n,o){e.check_consent("users")&&(X[t]||(X[t]={}),"$push"===o||"$pull"===o||"$addToSet"===o?(X[t][o]||(X[t][o]=[]),X[t][o].push(n)):X[t][o]=n)};function G(){e.ignore_prefetch&&void 0!==document.visibilityState&&"prerender"===document.visibilityState&&(e.ignore_visitor=!0),e.ignore_bots&&j.test(navigator.userAgent)&&(e.ignore_visitor=!0)}function $(e){var t=[];if(void 0!==e.options)for(var n=0;n<e.options.length;n++)e.options[n].selected&&t.push(e.options[n].value);return t.join(", ")}function W(){var t;if(void 0!==e.onload&&e.onload.length>0){for(t=0;t<e.onload.length;t++)"function"==typeof e.onload[t]&&e.onload[t]();e.onload=[]}}function Q(t,n){try{var o=document.createElement("div");o.className="tracker-iframe-wrapper",o.id="tracker-iframe-wrapper-"+t._id;var r=document.createElement("span");r.className="tracker-feedback-close-icon",r.id="tracker-feedback-close-icon-"+t._id,r.innerHTML="x";var a=document.createElement("iframe");if(a.name="tracker-feedback-iframe",a.id="tracker-feedback-iframe",a.src=e.url+"/feedback?widget_id="+t._id+"&app_key="+e.app_key+"&device_id="+e.device_id+"&sdk_version="+i,document.body.appendChild(o),o.appendChild(r),o.appendChild(a),ve(document.getElementById("tracker-feedback-close-icon-"+t._id),"click",function(){document.getElementById("tracker-iframe-wrapper-"+t._id).style.display="none",document.getElementById("cfbg").style.display="none"}),n){var s=document.createElement("div");s.style.color=t.trigger_font_color<7?"#"+t.trigger_font_color:t.trigger_font_color,s.style.backgroundColor=t.trigger_bg_color.length<7?"#"+t.trigger_bg_color:t.trigger_bg_color,s.className="tracker-feedback-sticker "+t.trigger_position,s.id="tracker-feedback-sticker-"+t._id,s.innerHTML='<svg id="feedback-sticker-svg" aria-hidden="true" data-prefix="far" data-icon="grin" class="svg-inline--fa fa-grin fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path id="smileyPathInStickerSvg" fill="white" d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm105.6-151.4c-25.9 8.3-64.4 13.1-105.6 13.1s-79.6-4.8-105.6-13.1c-9.9-3.1-19.4 5.4-17.7 15.3 7.9 47.1 71.3 80 123.3 80s115.3-32.9 123.3-80c1.6-9.8-7.7-18.4-17.7-15.3zM168 240c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32z"></path></svg> '+t.trigger_button_text,document.body.appendChild(s);var c=document.getElementById("smileyPathInStickerSvg");c&&(c.style.fill=t.trigger_font_color<7?"#"+t.trigger_font_color:t.trigger_font_color),ve(document.getElementById("tracker-feedback-sticker-"+t._id),"click",function(){document.getElementById("tracker-iframe-wrapper-"+t._id).style.display="block",document.getElementById("cfbg").style.display="block"})}else document.getElementById("tracker-iframe-wrapper-"+t._id).style.display="block",document.getElementById("cfbg").style.display="block"}catch(e){ae("Somethings went wrong while element injecting process: "+e)}}function K(){if(w){var t={name:w,segment:n};e.check_consent("views")&&Y({key:"[CLY]_view",dur:J?se()-k:b,segmentation:t}),w=null}}function Z(){N&&Oe("cly_session",se()+60*M)}function ee(t){t.app_key=e.app_key,t.device_id=e.device_id,t.sdk_name=r,t.sdk_version=i,e.check_consent("location")?(e.country_code&&(t.country_code=e.country_code),e.city&&(t.city=e.city),null!==e.ip_address&&(t.ip_address=e.ip_address)):t.location="",t.timestamp=ce();var n=new Date;t.hour=n.getHours(),t.dow=n.getDay()}function te(t){e.ignore_visitor||(e.app_key&&e.device_id?(ee(t),u.length>l&&u.shift(),u.push(t),Oe("cly_queue",u,!0)):ae("app_key or device_id is missing"))}function ne(){if(e.test_mode||e.ignore_visitor)P=!1;else{P=!0,W();var n=0;if(void 0!==e.q&&e.q.length>0){var o,i=e.q;for(e.q=[],n=0;n<i.length;n++)if(ae("Processing queued call",o=i[n]),"function"==typeof o)o();else if(Array.isArray(o)&&o.length>0)if(void 0!==e[o[0]])e[o[0]].apply(null,o.slice(1));else{var r=o[0].replace("userData.","");void 0!==e.userData[r]&&e.userData[r].apply(null,o.slice(1))}}if(s&&h&&J){var a=se();a-t>C&&(e.session_duration(a-t),t=a)}if(f.length>0){if(f.length<=E)te({events:JSON.stringify(f)}),f=[];else{var l=f.splice(0,E);te({events:JSON.stringify(l)})}Oe("cly_event",f)}if(u.length>0&&B&&se()>x){B=!1;var m=u.shift();Se(I)&&(R&&(clearTimeout(R),R=null),m.consent=JSON.stringify(I),I={}),ae("Processing request",m),ue(e.url+c,m,function(e,t){ae("Request Finished",t,e),e&&(u.unshift(t),x=se()+L),Oe("cly_queue",u,!0),B=!0})}setTimeout(ne,d)}}function oe(){return Oe("cly_id")||ie()}function ie(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)});return t}function re(){var t={};if(t._app_version=e.app_version,t._ua=navigator.userAgent,screen.width){var n=screen.width?parseInt(screen.width):0,o=screen.height?parseInt(screen.height):0;if(0!==n&&0!==o){var i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if(i&&window.devicePixelRatio)n=Math.round(n*window.devicePixelRatio),o=Math.round(o*window.devicePixelRatio);else if(90===Math.abs(window.orientation)){var r=n;n=o,o=r}t._resolution=n+"x"+o}}window.devicePixelRatio&&(t._density=window.devicePixelRatio);var a=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage;if(void 0!==a&&(t._locale=a),void 0!==document.referrer&&document.referrer.length){var s=q.exec(document.referrer);if(s&&s[11]&&s[11]!==window.location.hostname){var c=!1;if(_&&_.length)for(var d=0;d<_.length;d++)try{var l=new RegExp(_[d]);if(l.test(document.referrer)){ae("Ignored:",document.referrer),c=!0;break}}catch(e){ae("Problem with regex",_[d])}c||(t._store=document.referrer)}}return ae("Got metrics",t),t}function ae(){e.debug&&"undefined"!=typeof console&&(arguments[1]&&"object"==typeof arguments[1]&&(arguments[1]=JSON.stringify(arguments[1])),console.log(Array.prototype.slice.call(arguments).join("\n")))}function se(){return Math.floor((new Date).getTime()/1e3)}function ce(){var e=(new Date).getTime();return A>=e?A++:A=e,A}function de(t,n,o){return void 0!==n[t]?n[t]:void 0!==e[t]?e[t]:o}function le(t,n,i){if(e.check_consent("crashes")&&t){i=i||v;var r="";"object"==typeof t?void 0!==t.stack?r=t.stack:(void 0!==t.name&&(r+=t.name+":"),void 0!==t.message&&(r+=t.message+"\n"),void 0!==t.fileName&&(r+="in "+t.fileName+"\n"),void 0!==t.lineNumber&&(r+="on "+t.lineNumber),void 0!==t.columnNumber&&(r+=":"+t.columnNumber)):r=t+"",n=!!n;var a=re(),s={_resolution:a._resolution,_error:r,_app_version:a._app_version,_run:se()-o,_not_os_specific:!0},c=navigator.battery||navigator.webkitBattery||navigator.mozBattery||navigator.msBattery;c&&(s._bat=Math.floor(100*c.level)),void 0!==navigator.onLine&&(s._online=!!navigator.onLine),s._background=!document.hasFocus(),g.length>0&&(s._logs=g.join("\n")),g=[],s._nonfatal=n,s._view=(window.location.pathname||"")+(window.location.search||"")+(window.location.hash||""),void 0!==i&&(s._custom=i);try{var d=document.createElement("canvas"),l=d.getContext("experimental-webgl");s._opengl=l.getParameter(l.VERSION)}catch(e){}te({crash:JSON.stringify(s)})}}function ue(t,n,o){try{ae("Sending XML HTTP request");var i=window.XMLHttpRequest?new window.XMLHttpRequest:window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):null,r=fe(n=n||{}),a="GET";(e.force_post||r.length>=2e3)&&(a="POST"),"GET"===a?i.open("GET",t+"?"+r,!0):(i.open("POST",t,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded")),i.onreadystatechange=function(){4===this.readyState&&this.status>=200&&this.status<300?"function"==typeof o&&o(!1,n,this.responseText):4===this.readyState&&(ae("Failed Server XML HTTP request",this.status),"function"==typeof o&&o(!0,n))},"GET"===a?i.send():i.send(r)}catch(e){ae("Failed XML HTTP request",e),"function"==typeof o&&o(!0,n)}}function fe(e){var t=[];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}function me(e){return"/"===e.substr(e.length-1)?e.substr(0,e.length-1):e}function ge(e,t){for(var n,o={},i=0;i<t.length;i++)n=t[i],void 0!==e[n]&&(o[n]=e[n]);return o}e.userData={set:function(e,t){X[e]=t},unset:function(e){X[e]=""},set_once:function(e,t){F(e,t,"$setOnce")},increment:function(e){F(e,1,"$inc")},increment_by:function(e,t){F(e,t,"$inc")},multiply:function(e,t){F(e,t,"$mul")},max:function(e,t){F(e,t,"$max")},min:function(e,t){F(e,t,"$min")},push:function(e,t){F(e,t,"$push")},push_unique:function(e,t){F(e,t,"$addToSet")},pull:function(e,t){F(e,t,"$pull")},save:function(){e.check_consent("users")&&te({user_details:JSON.stringify({custom:X})}),X={}}},e.track_errors=function(e){v=e,window.onerror=function(e,t,n,o,i){if(void 0!==i)le(i,!1);else{var r="";void 0!==e&&(r+=e+"\n"),void 0!==t&&(r+="at "+t),void 0!==n&&(r+=":"+n),void 0!==(o=o||window.event&&window.event.errorCharacter)&&(r+=":"+o),r+="\n";try{for(var a=[],s=arguments.callee.caller;s;)a.push(s.name),s=s.caller;r+=a.join("\n")}catch(e){}le(r,!1)}},window.addEventListener("unhandledrejection",function(e){le(new Error("Unhandled rejection (reason: "+(e.reason&&e.reason.stack?e.reason.stack:e.reason)+")."),!0)})},e.log_error=function(e,t){le(e,!0,t)},e.add_log=function(t){e.check_consent("crashes")&&(g.length>T&&g.shift(),g.push(t))},e.fetch_remote_config=function(t,n,o){if(e.check_any_consent()){var i={method:"fetch_remote_config"};e.check_consent("sessions")&&(i.metrics=JSON.stringify(re())),t&&(o||"function"!=typeof t?Array.isArray(t)&&t.length&&(i.keys=JSON.stringify(t)):(o=t,t=null)),n&&(o||"function"!=typeof n?Array.isArray(n)&&n.length&&(i.omit_keys=JSON.stringify(n)):(o=n,n=null)),ee(i),ue(e.url+"/o/sdk",i,function(e,t,n){try{var r=JSON.parse(n);if(i.keys||i.omit_keys)for(var a in r)m[a]=r[a];else m=r;Oe("cly_remote_configs",m)}catch(e){}"function"==typeof o&&o(e,m)})}},e.get_remote_config=function(e){return void 0!==e?m[e]:m},e.stop_time=function(){J&&(J=!1,y=se()-t,b=se()-k)},e.start_time=function(){J||(J=!0,t=se()-y,k=se()-b,b=0)},e.track_sessions=function(){e.begin_session(),e.start_time(),ve(window,"beforeunload",function(){e.end_session()}),ve(window,"unload",function(){e.end_session()});var t="hidden";function n(){document[t]?e.stop_time():e.start_time()}function o(){O>=S&&e.start_time(),O=0}t in document?document.addEventListener("visibilitychange",n):(t="mozHidden")in document?document.addEventListener("mozvisibilitychange",n):(t="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",n):(t="msHidden")in document?document.addEventListener("msvisibilitychange",n):"onfocusin"in document?(ve(window,"focusin",function(){e.start_time()}),ve(window,"focusout",function(){e.stop_time()})):(ve(window,"focus",function(){e.start_time()}),ve(window,"blur",function(){e.stop_time()}),ve(window,"pageshow",function(){e.start_time()}),ve(window,"pagehide",function(){e.stop_time()})),ve(window,"mousemove",o),ve(window,"click",o),ve(window,"keydown",o),ve(window,"scroll",o),setInterval(function(){++O>=S&&e.stop_time()},6e4)},e.track_pageview=function(t,n){if(K(),t&&Array.isArray(t)&&(n=t,t=null),t||(t=e.getViewName?e.getViewName():window.location.pathname),n&&n.length)for(var o=0;o<n.length;o++)try{if(new RegExp(n[o]).test(t))return void ae("Ignored:",t)}catch(e){ae("Problem with regex",n[o])}w=t,k=se();var i={name:t,visit:1,domain:window.location.hostname,view:e.getViewUrl?e.getViewUrl():window.location.pathname};if(void 0!==document.referrer&&document.referrer.length){var r=q.exec(document.referrer);r&&r[11]&&r[11]!==window.location.hostname&&(i.start=1)}e.check_consent("views")?(Y({key:"[CLY]_view",segmentation:i}),D.push(i),D.length>20&&D.shift(),Oe("cly_view_history",D)):H.track_pageview=arguments},e.track_view=function(t,n){e.track_pageview(t,n)},e.track_clicks=function(t){t=t||document;var n=!0;ve(t,"click",function(t){if(n){if(n=!1,we(t),void 0!==t.pageX&&void 0!==t.pageY){var o=ke(),i=be();e.check_consent("clicks")&&Y({key:"[CLY]_action",segmentation:{type:"click",x:t.pageX,y:t.pageY,width:i,height:o,domain:window.location.hostname,view:e.getViewUrl?e.getViewUrl():window.location.pathname}})}setTimeout(function(){n=!0},1e3)}})},e.track_scrolls=function(t){t=t||window;var n=!0,o=0;function i(){if(n){n=!1;var t=ke(),i=be(),r=xe();e.check_consent("scrolls")&&Y({key:"[CLY]_action",segmentation:{type:"scroll",y:o+r,width:i,height:t,domain:window.location.hostname,view:e.getViewUrl?e.getViewUrl():window.location.pathname}})}}ve(t,"scroll",function(){o=Math.max(o,window.scrollY,document.body.scrollTop,document.documentElement.scrollTop)}),ve(t,"beforeunload",i),ve(t,"unload",i)},e.track_links=function(t){t=t||document,ve(t,"click",function(t){var n=he(t).closest("a");n&&(we(t),e.check_consent("clicks")&&Y({key:"linkClick",segmentation:{href:n.href,text:n.innerText,id:n.id,view:e.getViewUrl?e.getViewUrl():window.location.pathname}}))})},e.track_forms=function(t,n){function o(e){return e.name||e.id||e.type||e.nodeName}t=t||document,ve(t,"submit",function(t){var i,r=he(t),a={id:r.id,name:r.name,action:r.action,method:r.method,view:e.getViewUrl?e.getViewUrl():window.location.pathname};if(void 0!==r.elements){for(var s=0;s<r.elements.length;s++)(i=r.elements[s])&&"password"!==i.type&&(void 0===a["input:"+o(i)]&&(a["input:"+o(i)]=[]),"select"===i.nodeName.toLowerCase()?void 0!==i.multiple?a["input:"+o(i)].push($(i)):a["input:"+o(i)].push(i.options[i.selectedIndex].value):"input"===i.nodeName.toLowerCase()?void 0!==i.type?"checkbox"===i.type.toLowerCase()||"radio"===i.type.toLowerCase()?i.checked&&a["input:"+o(i)].push(i.value):("hidden"!==i.type.toLowerCase()||n)&&a["input:"+o(i)].push(i.value):a["input:"+o(i)].push(i.value):"textarea"===i.nodeName.toLowerCase()?a["input:"+o(i)].push(i.value):void 0!==i.value&&a["input:"+o(i)].push(i.value));for(var c in a)void 0!==a[c].join&&(a[c]=a[c].join(", "))}e.check_consent("forms")&&Y({key:"formSubmit",segmentation:a})})},e.collect_from_forms=function(t,n){t=t||document,ve(t,"submit",function(o){var i,r=he(o),a={},s=!1;if(void 0!==r.elements){var c,d,l={},u=t.getElementsByTagName("LABEL");for(c=0;c<u.length;c++)u[c].htmlFor&&""!==u[c].htmlFor&&(l[u[c].htmlFor]=u[c].innerText||u[c].textContent||u[c].innerHTML);for(c=0;c<r.elements.length;c++)if((i=r.elements[c])&&"password"!==i.type&&-1===i.className.indexOf("cly_user_ignore")){var f="";if("select"===i.nodeName.toLowerCase()?f=void 0!==i.multiple?$(i):i.options[i.selectedIndex].value:"input"===i.nodeName.toLowerCase()?void 0===i.type||"checkbox"!==i.type.toLowerCase()&&"radio"!==i.type.toLowerCase()?f=i.value:i.checked&&(f=i.value):"textarea"===i.nodeName.toLowerCase()?f=i.value:void 0!==i.value&&(f=i.value),i.className&&-1!==i.className.indexOf("cly_user_")){var m=i.className.split(" ");for(d=0;d<m.length;d++)if(0===m[d].indexOf("cly_user_")){a[m[d].replace("cly_user_","")]=f,s=!0;break}}else i.type&&"email"===i.type.toLowerCase()||i.name&&-1!==i.name.toLowerCase().indexOf("email")||i.id&&-1!==i.id.toLowerCase().indexOf("email")||i.id&&l[i.id]&&-1!==l[i.id].toLowerCase().indexOf("email")||/[^@\s]+@[^@\s]+\.[^@\s]+/.test(f)?(a.email||(a.email=f),s=!0):i.name&&-1!==i.name.toLowerCase().indexOf("username")||i.id&&-1!==i.id.toLowerCase().indexOf("username")||i.id&&l[i.id]&&-1!==l[i.id].toLowerCase().indexOf("username")?(a.username||(a.username=f),s=!0):i.name&&(-1!==i.name.toLowerCase().indexOf("tel")||-1!==i.name.toLowerCase().indexOf("phone")||-1!==i.name.toLowerCase().indexOf("number"))||i.id&&(-1!==i.id.toLowerCase().indexOf("tel")||-1!==i.id.toLowerCase().indexOf("phone")||-1!==i.id.toLowerCase().indexOf("number"))||i.id&&l[i.id]&&(-1!==l[i.id].toLowerCase().indexOf("tel")||-1!==l[i.id].toLowerCase().indexOf("phone")||-1!==l[i.id].toLowerCase().indexOf("number"))?(a.phone||(a.phone=f),s=!0):i.name&&(-1!==i.name.toLowerCase().indexOf("org")||-1!==i.name.toLowerCase().indexOf("company"))||i.id&&(-1!==i.id.toLowerCase().indexOf("org")||-1!==i.id.toLowerCase().indexOf("company"))||i.id&&l[i.id]&&(-1!==l[i.id].toLowerCase().indexOf("org")||-1!==l[i.id].toLowerCase().indexOf("company"))?(a.organization||(a.organization=f),s=!0):(i.name&&-1!==i.name.toLowerCase().indexOf("name")||i.id&&-1!==i.id.toLowerCase().indexOf("name")||i.id&&l[i.id]&&-1!==l[i.id].toLowerCase().indexOf("name"))&&(a.name||(a.name=""),a.name+=f+" ",s=!0)}}s&&(ae("Gathered user data",a),n?e.user_details({custom:a}):e.user_details(a))})},e.collect_from_facebook=function(t){FB&&FB.api&&FB.api("/me",function(n){var o={};if(n.name&&(o.name=n.name),n.email&&(o.email=n.email),"male"===n.gender?o.gender="M":"female"===n.gender&&(o.gender="F"),n.birthday){var i=n.birthday.split("/").pop();i&&4===i.length&&(o.byear=i)}if(n.work&&n.work[0]&&n.work[0].employer&&n.work[0].employer.name&&(o.organization=n.work[0].employer.name),t)for(var r in o.custom={},t){for(var a=t[r].split("."),s=n,c=0;c<a.length&&void 0!==(s=s[a[c]]);c++);void 0!==s&&(o.custom[r]=s)}e.user_details(o)})},e.opt_out=function(){e.ignore_visitor=!0,Oe("cly_ignore",!0)},e.opt_in=function(){Oe("cly_ignore",!1),e.ignore_visitor=!1,G(),e.ignore_visitor||P||ne()},e.show_feedback_popup=function(t){ue(e.url+"/o/feedback/widget",{widget_id:t},function(e,t,n){e&&ae("Error occurred",e);try{Q(JSON.parse(n),!1)}catch(e){ae("JSON parse failed: "+e)}})},e.enable_feedback=function(t){Te(e.url+"/star-rating/stylesheets/tracker-feedback-web.css");var n=t.popups||t.widgets;n.length>0?(document.body.innerHTML+='<div id="cfbg"></div>',ue(e.url+"/o/feedback/multiple-widgets-by-id",{widgets:JSON.stringify(n)},function(e,t,n){e&&ae("Errors occurred:",e);try{for(var o=JSON.parse(n),i=0;i<o.length;i++)if("true"===o[i].is_active&&o[i].target_devices[ye.device])if(o[i].hide_sticker="true"===o[i].hide_sticker,"all"!==o[i].target_page||o[i].hide_sticker)for(var r=o[i].target_pages,a=0;a<r.length;a++)r[a]!==window.location.pathname||o[i].hide_sticker||Q(o[i],!0);else Q(o[i],!0)}catch(e){ae("JSON parse error: "+e)}})):ae("You should provide at least one widget id as param. Read documentation for more detail. https://resources.count.ly/plugins/feedback")},Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;for(e=e.toUpperCase();t;){if(t.nodeName.toUpperCase()===e)return t;t=t.parentElement}});var pe,_e,ve=function(e,t,n){void 0!==e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},he=function(e){return e?void 0!==e.target?e.target:e.srcElement:window.event.srcElement},ye=(pe=navigator.userAgent.toLowerCase(),{device:(_e=function(e){return e&&(pe=(e+"").toLowerCase()),/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(pe)?"tablet":/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/.test(pe)?"phone":"desktop"})(),detect:_e,isMobile:"desktop"!==_e(),userAgent:pe});function we(e){return void 0===e.pageY&&"number"==typeof e.clientX&&document.documentElement&&(e.pageX=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.pageY=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),e}function ke(){var e=document;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function be(){var e=document;return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function xe(){var e=document;return Math.min(Math.min(e.body.clientHeight,e.documentElement.clientHeight),Math.min(e.body.offsetHeight,e.documentElement.offsetHeight),window.innerHeight)}function Le(e){Oe("cly_token",e)}function Se(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}var Oe=function(e,t,n){n=n||!1;var o,i=!1;i=!0;try{"undefined"!=typeof localStorage&&localStorage.setItem("testLocal",!0)}catch(e){i=!1}if(null!=t&&("object"==typeof t&&(t=JSON.stringify(t)),i?localStorage.setItem(e,t):n||r(e,t,30)),void 0===t){i?o=localStorage.getItem(e):n||(o=function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0,i=n.length;o<i;o++){for(var r=n[o];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}(e));try{o=JSON.parse(o)}catch(e){}return o}function r(e,t,n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var i="; expires="+o.toGMTString();document.cookie=e+"="+t+i+"; path=/"}null===t&&(i?localStorage.removeItem(e):n||r(e,"",-1))};function Ce(e,t,n,o,i,r){var a,s=document.createElement(e);s.setAttribute(t,n),s.setAttribute(o,i),r&&(s.onreadystatechange=s.onload=function(){a||r(),a=!0}),document.getElementsByTagName("head")[0].appendChild(s)}function Ee(e,t){Ce("script","type","text/javascript","src",e,t)}function Te(e,t){Ce("link","rel","stylesheet","href",e,t)}function Ne(){var e=document.getElementById("cly-loader");if(!e){ae("setting up loader");var t="#cly-loader {height: 4px; width: 100%; position: absolute; z-index: 99999; overflow: hidden; background-color: #fff; top:0px; left:0px;}#cly-loader:before{display: block; position: absolute; content: ''; left: -200px; width: 200px; height: 4px; background-color: #2EB52B; animation: cly-loading 2s linear infinite;}@keyframes cly-loading { from {left: -200px; width: 30%;} 50% {width: 30%;} 70% {width: 70%;} 80% { left: 50%;} 95% {left: 120%;} to {left: 100%;}}",n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t)),n.appendChild(o),(e=document.createElement("div")).setAttribute("id","cly-loader"),document.body.appendChild(e)}e.style.display="block"}function Me(){var e=document.getElementById("cly-loader");e&&(e.style.display="none")}return e._internals={store:Oe,getDocWidth:be,getDocHeight:ke,getViewportHeight:xe,get_page_coord:we,get_event_target:he,add_event:ve,getProperties:ge,stripTrailingSlash:me,prepareParams:fe,sendXmlHttpRequest:ue,recordError:le,getMsTimestamp:ce,getTimestamp:se,log:ae,getMetrics:re,generateUUID:ie,getId:oe,heartBeat:ne,toRequestQueue:te,reportViewDuration:K,loadJS:Ee,loadCSS:Te,getLastView:function(){return w},setToken:Le,getToken:function(){var e=Oe("cly_token");return Oe("cly_token",null),e},showLoader:Ne,hideLoader:Me,add_cly_events:Y,detect_device:ye,getRequestQueue:function(){return u},getEventQueue:function(){return f}},e}(i.Tracker)}.apply(t,[]))||(e.exports=o)}])});